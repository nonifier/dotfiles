- defaults:
    link:
        create: true
        relink: true
        force: true

- clean: ['~']

- link: 
    ~/.bashrc: config/bash/bashrc
    ~/.inputrc: config/inputrc
    ~/.config/alacritty: config/alacritty
    ~/.config/bash: config/bash
    ~/.config/i3: config/i3
    ~/.config/nvim: config/nvim
    ~/.config/polybar: config/polybar
    ~/.config/rofi: config/rofi
    ~/.config/wallpapers: config/wallpapers
    ~/.config/powerline-shell/config.json: config/powerline-shell/config.json
    ~/.gdbinit: config/gdbinit
    ~/.gitconfig: config/git/gitconfig
    ~/.gitignore: config/git/gitignore
    ~/.pdbrc.py: config/pdbrc.py

- shell:
    - [ sudo snap install nvim --classic ]
    - [ sudo snap install ripgrep --classic ]
    - command: 
        sh -c 'curl -fLo "${XDG_DATA_HOME:-$HOME/.local/share}"/nvim/site/autoload/plug.vim --create-dirs https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim' 
    - description: == Install packagages
      command: sudo apt install -y clang-tools-9 clangd-9 libssl-dev pass empty-expect git ssh httpie
    - description: == Configure alternatives
      command: sudo update-alternatives --install /usr/bin/clangd clangd /usr/bin/clangd-9 900
            && sudo update-alternatives --install /usr/bin/clang clang /usr/bin/clang-9 900 --slave /usr/bin/clang++ clang++ /usr/bin/clang++-9
    - description: Ubuntu 18 install
      command:
        "[[ `lsb_release -c -s` == 'bionic' ]] && echo 'Ubuntu 18' || exit 0"
    - description: Ubuntu 20 install
      command:
        "[[ `lsb_release -c -s` == 'focal' ]] && sudo apt install -y polybar fzf || exit 0" 
      #- 
      #command: 
      #       sudo apt install -y i3 feh alacritty compton rofi
      #description: == Colour manager (ie. https://github.com/dylanaraps/pywal/wiki/Installation#table-of-contents)
    - description: Password-store
      command: '[[ -d ~/.password-store/ ]] || git clone git@github.com:nonifier/password-store.git ~/.password-store/'
    - description: Password-store host app for Firefox
      command: '[[ -d ~/.mozilla/native-messaging-hosts/passff.py ]] || (curl -sSL github.com/passff/passff-host/releases/latest/download/install_host_app.sh | bash -s -- firefox)'
      
